<!doctype html>
<html lang="es">
{% load static %}
<head>
  <!-- META -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Patitas Amigables</title>

  <!-- CSS de la plantilla -->
  <link rel="stylesheet" href="{% static 'plantilla/admin/vendors/feather/feather.css' %}">
  <link rel="stylesheet" href="{% static 'plantilla/admin/vendors/ti-icons/css/themify-icons.css' %}">
  <link rel="stylesheet" href="{% static 'plantilla/admin/vendors/css/vendor.bundle.base.css' %}">
  <link rel="stylesheet" href="{% static 'plantilla/admin/css/vertical-layout-light/style.css' %}">
  <link rel="shortcut icon" href="{% static 'plantilla/admin/images/favicon.png' %}" />

  <style>
    body {
      background: linear-gradient(135deg, #fff3e0, #ffe0b2);
    }

    .error {
      color: red;
      font-size: 0.9rem;
    }

    .form-control.error {
      border: 1px solid red;
    }

    
  </style>

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <!-- jQuery Validate -->
  <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.min.js"></script>
</head>

<body>
  <div class="container-scroller">
    <div class="container-fluid page-body-wrapper full-page-wrapper">
      <div class="content-wrapper d-flex align-items-center auth px-0">
        <div class="row w-100 mx-0">
          <div class="col-lg-5 mx-auto">
            <div class="auth-form-light text-left py-5 px-4 px-sm-5">

              <div class="brand-logo text-center mb-3">
                <img src="{% static 'plantilla/admin/images/patitas.png' %}" alt="logo" style="width:100px;">
              </div>

              <h4 class="text-center mb-4 fw-bold" style="color: rgb(255, 140, 0);">
                游 Crear cuenta
              </h4>

              <form method="post" action="/registerNewUser" id="frm_register">
                {% csrf_token %}

                <div class="row">
                  <div class="col-md-6">
                    <div class="mb-3">
                      <label for="first_name" class="form-label">Nombres</label>
                      <input type="text" class="form-control" id="first_name" name="first_name">
                    </div>

                    <div class="mb-3">
                      <label for="last_name" class="form-label">Apellidos</label>
                      <input type="text" class="form-control" id="last_name" name="last_name">
                    </div>

                    <div class="mb-3">
                      <label for="phone" class="form-label">N칰mero de Celular</label>
                      <input type="text" class="form-control" id="phone" name="telefono">
                    </div>

                    <div class="mb-3">
                      <label for="email" class="form-label">Correo Electr칩nico</label>
                      <input type="email" class="form-control" id="email" name="email">
                    </div>
                  </div>

                  <div class="col-md-6">
                    <div class="mb-3">
                      <label for="address" class="form-label">Direcci칩n</label>
                      <input type="text" class="form-control" id="address" name="direccion">
                    </div>

                    <div class="mb-3">
                      <label for="username" class="form-label">Nombre de Usuario</label>
                      <input type="text" class="form-control" id="username" name="username">
                    </div>

                    <div class="mb-3">
                      <label for="password" class="form-label">Contrase침a</label>
                      <input type="password" class="form-control" id="password" name="password">
                    </div>

                    <div class="mb-3">
                      <label for="password2" class="form-label">Confirmar Contrase침a</label>
                      <input type="password" class="form-control" id="password2" name="password2">
                    </div>
                  </div>
                </div>

                <button type="submit"
                  class="btn w-100 py-2 fs-5 mb-4 rounded-2"
                  style="background-color: rgb(255, 140, 0); border: none; color: white;">
                  Registrarse
                </button>
              </form>

              <p class="text-center">
                쯏a tienes cuenta?
                <a href="/iniciarSesion" class="text-primary">Iniciar Sesi칩n</a>
              </p>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- JS de la plantilla -->
  <script src="{% static 'plantilla/admin/js/off-canvas.js' %}"></script>
  <script src="{% static 'plantilla/admin/js/hoverable-collapse.js' %}"></script>
  <script src="{% static 'plantilla/admin/js/template.js' %}"></script>
  <script src="{% static 'plantilla/admin/js/todolist.js' %}"></script>

 <!-- Validaci칩n -->
<script>
    jQuery.validator.addMethod("noSpace", function(value, element) {
    return value.trim().indexOf(" ") === -1; 
  }, "Por favor, ingrese un nombre de usuario sin espacios");

  $("#frm_register").validate({
    rules: {
      first_name: { required: true, minlength: 5, maxlength: 50 },
      last_name: { required: true, minlength: 5, maxlength: 50 },
      telefono: { required: true, digits: true, minlength: 10, maxlength: 10 },
      email: { required: true, email: true, minlength: 5, maxlength: 50 },
      direccion: { required: true, maxlength: 100 },
      username: { required: true, minlength: 4, maxlength: 20,noSpace: true},
      password: { required: true, minlength: 6, maxlength: 20 },
      password2: { required: true, equalTo: "#password" }
    },
    messages: {
      first_name: {
        required: "Por favor, ingrese sus nombres",
        minlength: "Por favor, ingrese al menos 5 caracteres ",
        maxlength: "Por favor, ingrese un m치ximo de 50 caracteres "
      },
      last_name: {
        required: "Por favor, ingrese sus apellidos",
        minlength: "Por favor, ingrese al menos 5 caracteres ",
        maxlength: "Por favor, ingrese un m치ximo de 50 caracteres "
      },
      telefono: {
        required: "Por favor, ingrese su n칰mero de celular",
        digits: "Por favor, ingrese solo n칰meros v치lidos",
        minlength: "Por favor, ingrese exactamente 10 d칤gitos",
        maxlength: "Por favor, ingrese exactamente 10 d칤gitos"
      },
      email: {
        required: "Por favor, ingrese su correo electr칩nico",
        email: "Por favor, ingrese un correo electr칩nico v치lido",
        minlength: "Por favor, ingrese al menos 5 caracteres ",
        maxlength: "Por favor, ingrese un m치ximo de 50 caracteres "
      },
      direccion: {
        required: "Por favor, ingrese su direcci칩n",
        maxlength: "Por favor, ingrese una direcci칩n con m치ximo 100 caracteres"
      },
      username: {
        required: "Por favor, ingrese un nombre de usuario",
        minlength: "Por favor, ingrese al menos 4 caracteres ",
        maxlength: "Por favor, ingrese un m치ximo de 20 caracteres ",
        noSpace: "Por favor, ingrese un nombre de usuario sin espacios"
      },
      password: {
        required: "Por favor, ingrese una contrase침a",
        minlength: "Por favor, ingrese una contrase침a con al menos 6 caracteres",
        maxlength: "Por favor, ingrese una contrase침a con m치ximo 20 caracteres"
      },
      password2: {
        required: "Por favor, ingrese nuevamente la contrase침a",
        equalTo: "Las contrase침as no coinciden"
      }
    }
  });
</script>

  {% if messages %}
    {% for mensaje in messages %}
        <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <script>
            Swal.fire({
                title: "{% if 'error' in mensaje.tags %}Error{% elif 'warning' in mensaje.tags %}Advertencia{% elif 'success' in mensaje.tags %}칄xito{% else %}Informaci칩n{% endif %}",
                text: "{{ mensaje|escapejs }}",
                icon: "{% if 'error' in mensaje.tags %}error{% elif 'warning' in mensaje.tags %}warning{% elif 'success' in mensaje.tags %}success{% else %}info{% endif %}",
                confirmButtonText: 'Aceptar'
            });
        </script>
    {% endfor %}
{% endif %}
</body>
</html>
