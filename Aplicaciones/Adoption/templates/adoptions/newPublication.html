{% extends "adoptions/plantilla.html" %}
{% block contenido %}

<div class="container mt-4 mb-5">
  <form id="frm_mascota" action="savePublication" method="post" enctype="multipart/form-data" class="p-4 shadow-lg rounded bg-light">
{% csrf_token %}
    <h4 class="text-center mb-4 text-success fw-bold">
       Registrar nueva publicaci贸n de mascota
    </h4>

    <!-- Fotograf铆as -->
    <div class="row">
      <div class="col-12 mb-3">
        <label for="image_path" class="form-label fw-semibold">Fotograf铆as (m谩ximo 5)</label>
        <input type="file" name="image_path[]" id="image_path" class="form-control w-100" multiple>
        <small class="text-muted">Puedes seleccionar hasta 5 im谩genes</small>
      </div>
    </div>

    <!-- Datos generales -->
    <div class="row">
      <div class="col-md-6 mb-3">
        <label for="name" class="form-label fw-semibold">Nombre de la mascota</label>
        <input type="text" name="name" id="name" class="form-control" placeholder="Ej. Luna, Max, Toby">
      </div>

      <div class="col-md-6 mb-3">
        <label for="species" class="form-label fw-semibold">Tipo de mascota</label>
        <select name="species" id="species" class="form-select">
          <option value="">-- Seleccione una opci贸n --</option>
          <option value="feline">Felino</option>
          <option value="canine">Canino</option>
        </select>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6 mb-3">
        <label for="breed" class="form-label fw-semibold">Raza</label>
        <input type="text" name="breed" id="breed" class="form-control" placeholder="Ej. Labrador, Persa">
      </div>

      <div class="col-md-6 mb-3">
        <label for="age" class="form-label fw-semibold">Edad</label>
        <input type="text" name="age" id="age" class="form-control" placeholder="Ej. 2 a帽os, 6 meses">
      </div>
    </div>


      <div class="col-md-6 mb-3">
        <label for="gender" class="form-label fw-semibold">Sexo de la mascota</label>
        <select name="gender" id="gender" class="form-select">
          <option value="">-- Seleccione una opci贸n --</option>
          <option value="masculine">Macho</option>
          <option value="feminine">Hembra</option>
        </select>
      </div>
    </div>

  

    <div class="row">
      <div class="col-md-6 mb-3">
        <label for="color" class="form-label fw-semibold">Color</label>
        <input type="text" name="color" id="color" class="form-control" placeholder="Ej. Blanco, Negro, Marr贸n">
      </div>

      <div class="col-md-6 mb-3">
        <label for="description" class="form-label fw-semibold">Descripci贸n</label>
        <textarea name="description" id="description" rows="3" class="form-control" placeholder="Ej. Muy juguet贸n, se lleva bien con ni帽os"></textarea>
      </div>
    </div>

    <div class="text-center mt-4">
      <button type="submit" class="btn btn-success px-4 me-2">
        <i class="bi bi-check-circle"></i> Guardar
      </button>
      <a href="/" class="btn btn-danger px-4">
        <i class="bi bi-x-circle"></i> Cancelar
      </a>
    </div>
  </form>
</div>

<!-- Script FileInput -->
<script>
  $("#image_path").fileinput({
    language: "es",
    allowedFileExtensions: ["jpg", "jpeg", "png"],
    showCaption: false,
    dropZoneEnabled: true,
    showClose: false,
    maxFileCount: 5,
    browseClass: "btn btn-primary",
    msgPlaceholder: "Selecciona hasta 5 im谩genes..."
  });
</script>

<!-- Script Validaci贸n -->
<script>
  $(document).ready(function () {
    $("#frm_mascota").validate({
      rules: {
        "image_path[]": {
          required: true,
          extension: "jpg|jpeg|png"
        },
        name: {
          required: true,
          minlength: 5,
          maxlength: 50
        },
        species: {
          required: true
        },
        breed: {
          required: true,
          minlength: 2,
          maxlength: 50
        },


        gender: {
          required: true,
        
        },

        age: {
          required: true,
          minlength: 1,
          maxlength: 20
        },
        color: {
          required: true,
          minlength: 5,
          maxlength: 30
        },
        description: {
          required: true,
          minlength: 10,
          maxlength: 500
        }
      },
      messages: {
        "image_path[]": {
          required: "Debe subir al menos una imagen",
          extension: "Solo se permiten archivos JPG, JPEG o PNG"
        },
        name: {
          required: "Ingrese el nombre de la mascota",
          minlength: "Debe tener al menos 5 caracteres",
          maxlength: "No debe exceder los 50 caracteres"
        },
        species: {
          required: "Seleccione el tipo de mascota"
        },
        breed: {
          required: "Ingrese la raza de la mascota",
          minlength: "Debe tener al menos 2 caracteres",
          maxlength: "No debe exceder los 50 caracteres"
        },
        age: {
          required: "Ingrese la edad aproximada de la mascota",
          minlength: "Debe tener al menos 1 car谩cter",
          maxlength: "No debe exceder los 20 caracteres"
        },
          gender: {
          required: "Seleccione el genero"
        },
        color: {
          required: "Ingrese el color de la mascota",
          minlength: "Debe tener al menos 5 caracteres",
          maxlength: "No debe exceder los 30 caracteres"
        },
        description: {
          required: "Ingrese una breve descripci贸n",
          minlength: "Debe tener al menos 10 caracteres",
          maxlength: "No debe exceder los 500 caracteres"
        }
      },
          });
  });
</script>

{% endblock %}
