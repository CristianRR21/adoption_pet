{% extends "adoptions/plantilla.html" %}
{% block contenido %}

<div class="container mt-5 mb-5">
  <div class="card shadow-lg rounded-4">
    <div class="card-header bg-success text-white text-center fw-bold">
      <i class="bi bi-paw"></i> Registrar Nueva Publicación de Mascota
    </div>
    <div class="card-body p-4">

      <form id="frm_mascota" action="savePublication" method="post" enctype="multipart/form-data">
        {% csrf_token %}

        
        <div class="mb-3">
          <label for="image_path" class="form-label fw-bold">Fotografías (máximo 5)</label>
          <input type="file" name="image_path[]" id="image_path" class="form-control" multiple accept="image/*">
          <small class="text-muted">Puedes seleccionar hasta 5 imágenes</small>
        </div>

        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="name" class="form-label fw-bold">Nombre de la mascota</label>
            <input type="text" name="name" id="name" class="form-control" placeholder="Ej. Luna, Max, Toby" required>
          </div>
          <div class="col-md-6 mb-3">
            <label for="species" class="form-label fw-bold">Tipo de mascota</label>
            <select name="species" id="species" class="form-select" required>
              <option value="">-- Seleccione una opción --</option>
              <option value="feline">Felino</option>
              <option value="canine">Canino</option>
            </select>
          </div>
        </div>

        <div class="row">


          <div class="col-md-6 mb-3">
              <label for="breed" class="form-label fw-bold">Raza</label>
              <select name="breed" id="breed" class="form-select" required>
                <option value="">-- Seleccione una opción --</option>
                <!-- Razas de perros -->
                <option class="canine" value="labrador">Labrador</option>
                <option class="canine" value="golden_retriever">Golden Retriever</option>
                <option class="canine" value="german_shepherd">Pastor Alemán</option>
                <option class="canine" value="bulldog">Bulldog</option>
                <option class="canine" value="beagle">Beagle</option>

                <!-- Razas de gatos -->
                <option class="feline" value="persian">Persa</option>
                <option class="feline" value="siamese">Siamés</option>
                <option class="feline" value="maine_coon">Maine Coon</option>
                <option class="feline" value="ragdoll">Ragdoll</option>
                <option class="feline" value="sphynx">Sphynx</option>
              </select>
            </div>



          <div class="col-md-6 mb-3">
            <label for="age" class="form-label fw-bold">Edad</label>
            <input  name="age" id="age" class="form-control" placeholder="Ej. 2 (solo valores numericos que representen la edad)">
          </div>
        </div>

        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="gender" class="form-label fw-bold">Sexo de la mascota</label>
            <select name="gender" id="gender" class="form-select" required>
              <option value="">-- Seleccione una opción --</option>
              <option value="masculine">Macho</option>
              <option value="feminine">Hembra</option>
            </select>
          </div>


            <div class="col-md-6 mb-3">
              <label for="color" class="form-label fw-bold">Color</label>
              <select name="color" id="color" class="form-select" required>
                <option value="">-- Seleccione una opción --</option>
                <option value="white">Blanco</option>
                <option value="black">Negro</option>
                <option value="brown">Marrón</option>
                <option value="gray">Gris</option>
                <option value="golden">Dorado</option>
                <option value="mixed">Mezcla</option>
              </select>


            </div>


        </div>

        <div class="mb-3">
          <label for="description" class="form-label fw-bold">Descripción</label>
          <textarea name="description" id="description" rows="3" class="form-control" placeholder="Ej. Muy juguetón, se lleva bien con niños"></textarea>
        </div>

        <div class="text-center">
          <button type="submit" class="btn btn-success px-4 me-2">
            <i class="bi bi-check-circle"></i> Guardar
          </button>
          <a href="/" class="btn btn-danger px-4">
            <i class="bi bi-x-circle"></i> Cancelar
          </a>
        </div>

      </form>
    </div>
  </div>
</div>


<!-- Script FileInput -->
<script>
  $("#image_path").fileinput({
    language: "es",
    allowedFileExtensions: ["jpg", "jpeg", "png"],
    showCaption: false,
    dropZoneEnabled: true,
    showClose: false,
    maxFileCount: 5,
    browseClass: "btn btn-primary",
    msgPlaceholder: "Selecciona hasta 5 imágenes..."
  });
</script>

<script>
  $("#frm_mascota").validate({
    rules: {
      "image_path[]": {
        required: true,
        extension: "jpg|jpeg|png"
      },
      name: {
        required: true,
        minlength: 5,
        maxlength: 50
      },
      species: {
        required: true
      },
      breed: {
        required: true,
       
      },
      gender: {
        required: true
      },
      age: {
        required: true,
        digits: true,
        min: 1,
        max: 20
      },
      color: {
        required: true,
     
      },
      description: {
        required: true,
        minlength: 10,
        maxlength: 500
      }
    },
    messages: {
      "image_path[]": {
        required: "Debe subir al menos una imagen",
        extension: "Solo se permiten archivos JPG, JPEG o PNG"
      },
      name: {
        required: "Ingrese el nombre de la mascota",
        minlength: "Debe tener al menos 5 caracteres",
        maxlength: "No debe exceder los 50 caracteres"
      },
      species: {
        required: "Seleccione el tipo de mascota"
      },
      breed: {
        required: "Seleccione la raza de la mascota",
 
      },
      gender: {
        required: "Seleccione el género"
      },
      age: {
        required: "Ingrese la edad aproximada de la mascota",
        digits: "Solo se permiten números enteros",
        min: "La edad mínima es 1",
        max: "La edad máxima es 20"
      },
      color: {
        required: "Seleccione el color de la mascota",

      },
      description: {
        required: "Ingrese una breve descripción",
        minlength: "Debe tener al menos 10 caracteres",
        maxlength: "No debe exceder los 500 caracteres"
      }
    }
  });
</script>
<script>
  $(document).ready(function() {
  $('#species').change(function() {
    var species = $(this).val();
    $('#breed option').hide();
    $('#breed option[value=""]').show(); 
    $('#breed option.' + species).show();
    $('#breed').val(''); 
  });
});

</script>



{% endblock %}
